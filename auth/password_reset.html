<!DOCTYPE html>
<head>
    <meta charset="utf-8">
    <title>Accounts - GeoShare</title>

    <link rel="stylesheet" type="text/css" href="../theme.css"/>
    <link rel="stylesheet" type="text/css" href="login.css"/>

    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet"/>

    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>

    <script type="text/javascript" src="action.js"></script>

    <script src='https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js'></script>

    <script src="https://www.gstatic.com/firebasejs/4.5.0/firebase.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.5.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.5.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.5.0/firebase-database.js"></script>

    <link rel="icon" type="image/x-icon" href="../img/favicon.ico"/>
</head>

<script>
    // Initialize Firebase
    var config = {
        apiKey: "AIzaSyA5_zLFEivVC-ETuNAe-1rRfc0Jj6z01Dk",
        authDomain: "modular-decoder-118720.firebaseapp.com",
        databaseURL: "https://modular-decoder-118720.firebaseio.com",
        projectId: "modular-decoder-118720",
        storageBucket: "modular-decoder-118720.appspot.com",
        messagingSenderId: "594909480502"
    };
    firebase.initializeApp(config);

    var isNewUser = false;
    var newName;
    var newEmail;

    document.addEventListener('DOMContentLoaded', function () {
        var mode = getParameterByName('mode');

        var auth = firebase.auth();

        switch (mode) {
            case 'resetPassword':
                handleResetPassword(auth, getParameterByName('oobCode'));
                break;
            case 'recoverEmail':
                handleRecoverEmail();
                break;
            default:
        }

    }, false);


</script>

<body>
<div id="content">
    <main id="wrapper">
        <h1>GeoShare</h1>
        <h2 id="errorMessage"></h2>
        <form class="form" id="getResetPasswordForm" method="post" autocomplete="on">
            <div id="email">
                <div class="field">
                    <input id="email" type="email" name="email" placeholder="Email" onkeypress="return enterPressed(event, 'buttonSubmitReset')" required>
                </div>
            </div>
            <div id="login">
                <div class="button login">
                    <input id="buttonSubmitReset" type="button" name="mode" value="DONE" onclick="sendPasswordResetEmail(this.form.email.value.toString())">
                </div>
            </div>
        </form>

        <form class="form" id="resetPasswordForm" method="post" action="#" autocomplete="on">
            <div id="email">
                <div class="field">
                    <input id="resetEmail" type="email" name="email" disabled>
                </div>
            </div>
            <div id="password">
                <div class="field">
                    <input id="password" type="password" name="password" placeholder="New Password" onkeypress="return enterPressed(event, 'buttonReset')" required>
                </div>
            </div>
            <div id="login">
                <div class="button login">
                    <input id="buttonReset" type="button" name="mode" value="RESET PASSWORD" onclick="resetPassword(this.form.email.value.toString(), this.form.password.value.toString())">
                </div>
            </div>
        </form>

        <div class="back-container" id="back">
            <div class="button back">
                <a href="action?mode=signin">
                    <button onclick="">BACK</button>
                </a>
            </div>
        </div>

    </main>
</div>

</body>

</html>
